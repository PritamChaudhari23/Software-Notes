CONTAINERS:

- **Lightweight**, **standalone**, and **executable software packages** that include everything needed to run a piece of software, such as the code, runtime, libraries, and system tools.
- They ensure consistency and reproducibility across different environments.
- Application and its dependencies are packaged as a single unit called container and deployed on container platform. It makes them reusable.
- Multiple packages can be deployed on a container platform and all of them use the same OS and same hardware. Unlike VM which has a guest OS.
- Microservices built using different technologies, different frameworks can be packaged as separate containers and those multiple containers can be deployed on single container platform.

---

VIRTUAL MACHINES:

---

CONTAINER VS VM:

Infrastructure/Hardware/Server => Hypervisor => Host OS => Virtual Machines [Application, Dependencies, Guest OS]

Infrastructure/Hardware/Server => Host OS => Container Engine/Platform/Docker => Containers [Application, Dependencies]

- Containerization:
- Virtualization:

---

DOCKER:

Docker is an open-source platform designed to automate the deployment, scaling, and management of applications. It uses containerization to enable developers to package applications with all their dependencies into a single container, ensuring consistency across multiple development, testing, and production environments.

What problem it solves?

- Some application which runs on a particular machine does not run on another machine sometimes.
- This may happen due to different various reasons such as different OS, environment variables, different configurations etc.

DOCKER CONTAINER:

- Most basic unit of docker.
- Contains layers of images => Base image (Linux Alpine), Application image and all other dependency images.

Docker Container Commands:

1. docker ps: list all running containers
2. docker ps -a: list running and stopped containers
3. docker run `<image_name>`: start an image - docker pull + docker start. Create and start a new container from an image.
4. docker start `<containerID>`: start stopped container
5. docker start `<container1ID>` `<container2ID>` `<container3ID>` : start multiple containers
6. docker stop `<containerID>`: stop a container
7. docker stop `<container1ID>` `<container2ID>` `<container3ID>` : stop multiple containers
8.

---

DOCKER IMAGE:

- Docker images are read-only templates used to create containers. They include the application code, libraries, and dependencies. Images can be built from a Dockerfile, which is a script that contains a series of instructions on how to create the image.
- Docker image vs Docker container: Image is just the artifact. Container is the runtime environment for image.

Docker Image Commands:

1. docker images: check existing images in registry
2. docker pull `<image_name>`: Pull an image from a registry
3. docker push `<image_name>`: Push an image to a registry

---

DOCKER FILE:

- Text file with a set of instructions to build our own Docker image. Blueprint of the docker image.
- Each instruction in a Dockerfile creates a layer in the image.
- Dockerfiles enable automation of the image creation process, making it easy to reproduce and share container configurations.
- Dockerfile is always called 'Dockerfile.txt'.
- The image must be rebuilt when dockerfile is updated.

---

REGISTRY:

- A Docker registry is a storage and distribution system for Docker images.
- Docker hub: Default public registry
- Private registries/repository can also be set up for secure and controlled distribution of images within an organization.

---

PORTS:

Container port vs host port:

port mapping: -p a:b -> host port:container port

---

NETWORK:

---

DOCKER VOLUMES:

- Volumes are used to persist data generated by and used by Docker containers. They allow data to be stored outside of the container’s filesystem, ensuring that data isn’t lost when containers are stopped or deleted.
- 3 types: Host volume, Anonymous volume, Named volumes

Docker Volume Commands:

1. docker volume create: Create a new volume.
2. docker volume ls: List all volumes.
3. docker volume inspect: Display detailed information about a volume.
4. docker volume rm: Remove one or more volumes.
5. docker volume prune: Remove all unused local volumes.

---

DOCKER COMPOSE:

- Tool for defining and running multi-container Docker applications.
- Used for running multiple services. Eg: n-Tier application - like UI tier, Webservice tier and database tier
- Configuration for application's services is written in a YAML (Yet Another Markup Language) file.
- It includes configuration for application’s services, networks, and volumes, simplifying the management of complex applications with multiple interconnected containers.

Docker Compose Commands:

1. docker-compose up: Create and start containers.
2. docker compose -f mongo.yaml up: Starts all containers specified in mongo.yaml file.
3. docker-compose down: Stop and remove containers, networks, images, and volumes.
4. docker compose -f mongo.yaml down: Stops and removes all containers specified in mongo.yaml file and the docker networks.
5. docker-compose build: Build or rebuild services.
6. docker-compose start: Start existing containers for a service.
7. docker-compose stop: Stop running containers without removing them.
8. docker-compose restart: Restart running containers.
9. docker-compose ps: List containers.
10. docker-compose exec: Execute a command in a running container.
11. docker-compose logs: View output from containers.
12. docker-compose pull: Pull service images.
13. docker-compose push: Push service images.
14. docker-compose scale: Set the number of containers for a service (deprecated in favor of `up --scale`).
15. docker-compose config: Validate and view the Compose file.
16. docker-compose rm: Remove stopped containers.
17. docker-compose run: Run a one-off command.

---

CONTAINER ORCHESTRATION:

- Orchestration: Docker orchestration tools, such as Kubernetes (often used with Docker), manage the deployment, scaling, and operation of containerized applications. These tools ensure that containers are scheduled, networked, and managed according to specified requirements.
- Orchestration - Making automated tasks work with each other in a sequence.
- Container orchestration - Kubernetes - Automatically handle container deployment, scaling, availability etc.
- Docker Swarm: Docker's native clustering and orchestration tool. It allows you to create and manage a cluster of Docker nodes, enabling the deployment and scaling of applications across multiple machines. Swarm ensures high availability and load balancing of services.

Docker Swarm Commands:

1. docker swarm init: Initialize a swarm.
2. docker swarm join: Join a swarm as a node.
3. docker swarm leave: Leave the swarm.
4. docker swarm update: Update the swarm.
5. docker node ls: List nodes in the swarm.
6. docker node inspect: Display detailed information about a node.
7. docker node update: Update a node.
8. docker node rm: Remove one or more nodes from the swarm.

---

LINKS & TUTORIALS:

Docker Tutorial: https://www.youtube.com/watch?v=3c-iBn73dDE

Reference: https://docs.docker.com/reference/

---
