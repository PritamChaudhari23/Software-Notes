Layered architecture:

- Seperation of concerns.
- Horizintal layers each with clear responsibility.
- Request and response pass from one layer to next.
- Typical 3-tier architecture: Presentation layer => Business / Domain Layer => Data Layer
- Request flow (top to bottom) => Client => Controller => Service => Repository => Database <= Response flow (bottom to top)

Layers:

1. Presentation Layer (Controller / API)
2. Application / Service / Domain Layer (Business Logic)
3. Data Access / Persistence / Infrastructure Layer (Repository / DAO)
4. Database

Components:

1. Controller:

- Handles HTTP request/response, input validation, routing.
- Serialization (Object => JSON) and Deserialization (JSON => Object) happens at the controller layer but its done by web framework (Express.js, Springboot etc.).
- Converted JSON is then sent to client.

2. Service:

- Contains business logic, orchestrates multiple repositories.

3. Repository:

- Contains DB queries, keeping db logic out of controllers or models.
- Fetches and persists data without exposing database details.
- Once we get data from DB, it is plugged in as per our model by repository and returned to service.
- Encapsulates all data access logic.

4. Model:

- Represents data or business concepts in a specific layer.
- Each layer has its own form of model. It represents same data but in different form at different layers.
- Presentation layer - DTO (Data Transfer Object)
- Domain layer (Entity / Business object)
- Data layer (Persistence model - ORM / ODM)
- Controllers handle requests, Services decide what to do, Repositories handle data, and Models carry information between them.

---

Clean architecture vs Layered Architecture:

- Layer arch. has flow from top to bottom, clean arch. has flow from outward to inward.
- Inner layers know nothing about outer layers.
- Business logic is fully independent.
- Main difference is dependency inversion.
- Presentation => Application (Use Cases) => Domain (Entities & Rules) <= Infrastructure (DB, Frameworks)

Layers:

1. Presentation Layer (Controller / API)
2. Application Layer (Service / Use Cases)
3. Domain Layer (Entities, Business Logic)
4. Data Access / Persistence / Infrastructure Layer (Repository / DAO)
5. Database

---
